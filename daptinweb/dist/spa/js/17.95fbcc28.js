(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"8b24":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-page",[e("div",{staticClass:"q-pa-md q-gutter-sm"},[e("q-breadcrumbs",{scopedSlots:t._u([{key:"separator",fn:function(){return[e("q-icon",{attrs:{size:"1.2em",name:"arrow_forward"}})]},proxy:!0}])},[e("q-breadcrumbs-el",{attrs:{label:t.serverConfig.hostname,icon:"fas fa-home"}})],1)],1),e("q-separator"),e("div",{staticClass:"row"},[e("div",{staticClass:"col-4 col-md-6 col-lg-4 col-xl-3 col-xs-12 col-sm-12 q-pa-md q-gutter-sm"},[e("q-card",[e("q-card-section",[e("q-item",[e("q-item-section",{attrs:{avatar:""}},[e("q-avatar",[e("q-icon",{attrs:{size:"lg",name:"fas fa-user"}})],1)],1),e("q-item-section",[t.showHostnameEdit?t._e():e("span",{staticClass:"text-h4"},[t._v("Users")]),t.showHostnameEdit?t._e():e("span",{staticClass:"text-bold"},[t._v("@ "+t._s(t.serverConfig.hostname))]),t.showHostnameEdit?e("q-input",{attrs:{value:t.serverConfig.hostname,label:"Hostname"},on:{keypress:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.saveHostname()}},model:{value:t.serverConfig.hostname,callback:function(a){t.$set(t.serverConfig,"hostname",a)},expression:"serverConfig.hostname"}}):t._e()],1),e("q-item-section",{attrs:{avatar:""}},[t.showHostnameEdit?t._e():e("q-icon",{staticStyle:{cursor:"pointer"},attrs:{name:"fas fa-edit",size:"xs"},on:{click:function(a){return t.changeHostname()}}}),t.showHostnameEdit?e("q-icon",{staticStyle:{cursor:"pointer"},attrs:{name:"fas fa-save",size:"xs"},on:{click:function(a){return t.saveHostname()}}}):t._e()],1)],1)],1),e("q-card-section",[e("div",{staticClass:"row q-pa-md"},[e("div",{staticClass:"col-4"},[e("span",{staticClass:"text-bold"},[t._v("Total")])]),e("div",{staticClass:"col-6 text-right"},[t._v("\n              "+t._s(t.userAggregate.count)+"\n            ")])]),e("div",{staticClass:"row q-pa-md"},[e("div",{staticClass:"col-4"},[e("span",{staticClass:"text-bold"},[t._v("User registrations")])]),e("div",{staticClass:"col-6 text-right"},[e("q-btn-toggle",{attrs:{size:"sm",rounded:"",color:"white","toggle-color":"primary","toggle-text-color":"white","text-color":"black",options:[{label:t.signUpPublicAvailable?"Enabled":"Enable",value:!0},{label:t.signUpPublicAvailable?"Disable":"Disabled",value:!1}]},model:{value:t.signUpPublicAvailable,callback:function(a){t.signUpPublicAvailable=a},expression:"signUpPublicAvailable"}})],1)]),e("div",{staticClass:"row q-pa-md"},[e("div",{staticClass:"col-4"},[e("span",{staticClass:"text-bold"},[t._v("Password Reset")])]),e("div",{staticClass:"col-6 text-right"},[t._v("\n              Disabled\n              ")])])])],1)],1),e("div",{staticClass:"col-4  col-md-6 col-lg-4 col-xl-3 col-xs-12 col-sm-12 q-pa-md q-gutter-sm"},[e("q-card",[e("q-card-section",[e("q-item",[e("q-item-section",{attrs:{avatar:""}},[e("q-avatar",[e("q-icon",{attrs:{size:"lg",name:"fas fa-database"}})],1)],1),e("q-item-section",[e("span",{staticClass:"text-h4"},[t._v("Data tables")])])],1)],1),e("q-card-section",[e("div",{staticClass:"row q-pa-md"},[e("div",{staticClass:"col-4"},[e("span",{staticClass:"text-bold"},[t._v("Total")])]),e("div",{staticClass:"col-6 text-right"},[t._v("\n              "+t._s(t.tables().length)+"\n            ")])])]),e("q-card-section",[e("div",{staticClass:"row "},[e("div",{staticClass:"col-12 q-pa-md q-gutter-sm"},[e("q-btn",{staticClass:"float-right",attrs:{icon:"list",round:""},on:{click:function(a){return t.$router.push("/tables")}}}),e("q-btn",{staticClass:"float-right",attrs:{round:"",icon:"add"},on:{click:function(a){return t.$router.push("/tables/create")}}})],1)])])],1)],1),e("div",{staticClass:"col-4 col-md-6 col-lg-4 col-xl-3 col-xs-12 col-sm-12 q-pa-md q-gutter-sm"},[e("q-card",[e("q-card-section",[e("q-item",[e("q-item-section",{attrs:{avatar:""}},[e("q-avatar",[e("q-icon",{attrs:{size:"lg",name:"fas fa-archive"}})],1)],1),e("q-item-section",[e("span",{staticClass:"text-h4"},[t._v("Storage")])])],1)],1),e("q-card-section",[e("div",{staticClass:"row q-pa-md"},[e("div",{staticClass:"col-4"},[e("span",{staticClass:"text-bold"},[t._v("Cloud stores")])]),e("div",{staticClass:"col-6 text-right"},[t._v("\n              "+t._s(t.cloudStoreAggregate.count)+"\n            ")])])]),e("q-card-section",[e("div",{staticClass:"row "},[e("div",{staticClass:"col-12 q-pa-md q-gutter-sm"},[e("q-btn",{staticClass:"float-right",attrs:{icon:"list",round:""},on:{click:function(a){return t.$router.push("/cloudstore")}}}),e("q-btn",{staticClass:"float-right",attrs:{round:"",icon:"add"},on:{click:function(a){return t.$router.push("/cloudstore?create=true")}}})],1)])])],1)],1),e("div",{staticClass:"col-4 col-md-6 col-lg-4 col-xl-3 col-xs-12 col-sm-12 q-pa-md q-gutter-sm"},[e("q-card",[e("q-card-section",[e("q-item",[e("q-item-section",{attrs:{avatar:""}},[e("q-avatar",[e("q-icon",{attrs:{size:"lg",name:"fas fa-film"}})],1)],1),e("q-item-section",[e("span",{staticClass:"text-h4"},[t._v("Sites")])])],1)],1),e("q-card-section",[e("div",{staticClass:"row q-pa-md"},[e("div",{staticClass:"col-4"},[e("span",{staticClass:"text-bold"},[t._v("Active")])]),e("div",{staticClass:"col-6 text-right"},[t._v("\n              "+t._s(t.siteAggregate.active)+"\n            ")])]),e("div",{staticClass:"row q-pa-md"},[e("div",{staticClass:"col-4"},[e("span",{staticClass:"text-bold"},[t._v("Total")])]),e("div",{staticClass:"col-6 text-right"},[t._v("\n              "+t._s(t.siteAggregate.total)+"\n            ")])])]),e("q-card-section",[e("div",{staticClass:"row "},[e("div",{staticClass:"col-12 q-pa-md q-gutter-sm"},[e("q-btn",{staticClass:"float-right",attrs:{round:"",icon:"list"}}),e("q-btn",{staticClass:"float-right",attrs:{label:"Create a website"}})],1)])])],1)],1),e("div",{staticClass:"col-4  col-md-6 col-lg-4 col-xl-3 col-xs-12 col-sm-12 q-pa-md q-gutter-sm"},[e("q-card",[e("q-card-section",[e("q-item",[e("q-item-section",{attrs:{avatar:""}},[e("q-avatar",[e("q-icon",{attrs:{size:"lg",name:"fas fa-bolt"}})],1)],1),e("q-item-section",[e("span",{staticClass:"text-h4"},[t._v("Integrations")])])],1)],1),e("q-card-section",[e("div",{staticClass:"row q-pa-md"},[e("div",{staticClass:"col-4"},[e("span",{staticClass:"text-bold"},[t._v("API Specs")])]),e("div",{staticClass:"col-6 text-right"},[t._v("\n              "+t._s(t.integrationAggregate.count)+"\n            ")])]),e("div",{staticClass:"row q-pa-md"},[e("div",{staticClass:"col-4"},[e("span",{staticClass:"text-bold"},[t._v("Actions")])]),e("div",{staticClass:"col-6 text-right"},[t._v("\n              "+t._s(t.actionAggregate.count)+"\n            ")])])]),e("q-card-section",[e("div",{staticClass:"row "},[e("div",{staticClass:"col-12 q-pa-md q-gutter-sm"},[e("q-btn",{staticClass:"float-right",attrs:{label:"Add API Spec"}}),e("q-btn",{staticClass:"float-right",attrs:{label:"Create an action"}})],1)])])],1)],1),e("div",{staticClass:"col-4  col-md-6 col-lg-4 col-xl-3 col-xs-12 col-sm-12 q-pa-md q-gutter-sm"},[e("q-card",[e("q-card-section",[e("q-item",[e("q-item-section",{attrs:{avatar:""}},[e("q-avatar",[e("q-icon",{attrs:{size:"lg",name:"fas fa-plug"}})],1)],1),e("q-item-section",[e("span",{staticClass:"text-h4"},[t._v("Services")])]),e("q-item-section",{attrs:{avatar:""}},[e("q-btn",{attrs:{rounded:"",color:"primary",flat:"",size:"md",icon:"fas fa-sync"},on:{click:function(a){return t.reloadServer()}}})],1)],1)],1),e("q-card-section",[e("div",{staticClass:"row q-pa-md"},[e("div",{staticClass:"col-4"},[e("span",{staticClass:"text-bold"},[t._v("JSON API endpoint")])]),e("div",{staticClass:"col-6 text-right"},[t._v("\n              Yes\n            ")])]),e("div",{staticClass:"row q-pa-md"},[e("div",{staticClass:"col-4"},[e("span",{staticClass:"text-bold"},[t._v("FTP service")])]),e("div",{staticClass:"col-6 text-right"},[t._v("\n              "+t._s("true"===t.serverConfig["ftp.enable"]?"Yes":"No")+"\n            ")])]),e("div",{staticClass:"row q-pa-md"},[e("div",{staticClass:"col-4"},[e("span",{staticClass:"text-bold"},[t._v("GraphQL endpoint")])]),e("div",{staticClass:"col-6 text-right"},[e("q-btn-toggle",{attrs:{size:"sm",rounded:"",color:"white","toggle-color":"primary","toggle-text-color":"white","text-color":"black",options:[{label:t.serverConfig["graphql.enable"]?"Enabled":"Enable",value:!0},{label:t.serverConfig["graphql.enable"]?"Disable":"Disabled",value:!1}]},on:{click:function(a){return t.updateGraphqlEndpoint()}},model:{value:t.serverConfig["graphql.enable"],callback:function(a){t.$set(t.serverConfig,"graphql.enable",a)},expression:"serverConfig['graphql.enable']"}})],1)]),e("div",{staticClass:"row q-pa-md"},[e("div",{staticClass:"col-4"},[e("span",{staticClass:"text-bold"},[t._v("IMAP endpoint")])]),e("div",{staticClass:"col-6 text-right"},[t._v("\n              "+t._s("true"===t.serverConfig["imap.enabled"]?"Yes":"No")+"\n            ")])]),e("div",{staticClass:"row q-pa-md"},[e("div",{staticClass:"col-4"},[e("span",{staticClass:"text-bold"},[t._v("Connection throttle")])]),e("div",{staticClass:"col-6 text-right"},[t._v("\n              "+t._s(t.serverConfig["limit.max_connections"])+"\n            ")])]),e("div",{staticClass:"row q-pa-md"},[e("div",{staticClass:"col-4"},[e("span",{staticClass:"text-bold"},[t._v("Allowed rate limit")])]),e("div",{staticClass:"col-6 text-right"},[t._v("\n              "+t._s(t.serverConfig["limit.rate"])+"\n            ")])])])],1)],1)]),t.showHelp?t._e():e("q-page-sticky",{attrs:{position:"top-right",offset:[0,0]}},[e("q-btn",{attrs:{flat:"",fab:"",icon:"fas fa-question"},on:{click:function(a){t.showHelp=!0}}})],1),e("q-drawer",{attrs:{overlay:"",width:400,side:"right"},model:{value:t.showHelp,callback:function(a){t.showHelp=a},expression:"showHelp"}},[t.showHelp?e("q-scroll-area",{staticClass:"fit"},[e("help-page",{on:{closeHelp:function(a){t.showHelp=!1}}})],1):t._e()],1)],1)},o=[],i=(e("8e6e"),e("8a81"),e("ac6a"),e("cadf"),e("06db"),e("456d"),e("c47a")),n=e.n(i),l=e("2f62");function c(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),e.push.apply(e,s)}return e}function r(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?c(Object(e),!0).forEach((function(a){n()(t,a,e[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):c(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))}))}return t}var d={name:"PageIndex",methods:r({updateGraphqlEndpoint:function(){var t=this;console.log("Update graphql endpoint",this.serverConfig["graphql.enable"]),this.saveConfig({name:"graphql.enable",value:this.serverConfig["graphql.enable"]}).then((function(a){t.serverConfig["graphql.enable"]?t.$q.notify({message:"GraphQL endpoint enabled"}):(t.$q.notify({message:"GraphQL endpoint disabled"}),t.reloadServer()),t.showHostnameEdit=!1})).catch((function(a){console.log("Failed to update graphql endpoint",a),t.$q.notify({message:"Failed to update endpoint status"})}))},saveHostname:function(){var t=this;this.saveConfig({name:"hostname",value:this.serverConfig.hostname}).then((function(a){t.$q.notify({message:"Hostname updated"}),t.reloadServer(),t.showHostnameEdit=!1})).catch((function(a){console.log("failed to upate hostname",a),t.$q.notify({message:"Failed to update hostname"})}))},changeHostname:function(){this.showHostnameEdit=!0},reloadServer:function(){console.log("Reload server");var t=this;t.executeAction({tableName:"world",actionName:"restart_daptin"}).then((function(a){t.$q.notify({message:"Server restarted"})})).catch((function(a){t.$q.notify({message:"Failed to restart"}),console.log("Failed to restart daptin",a)}))}},Object(l["b"])(["loadData","loadAggregates","loadServerConfig","executeAction","saveConfig"])),data:function(){return r({text:"",showHelp:!1,showHostnameEdit:!1,actionMap:{},userAggregate:{},cloudStoreAggregate:{},serverConfig:{},siteAggregate:{},integrationAggregate:{},actionAggregate:{},signUpPublicAvailable:!1,resetPublicAvailable:!1},Object(l["c"])(["tables"]))},mounted:function(){var t=this;t.loadData({tableName:"action",params:{page:{size:500}}}).then((function(a){console.log("Actions",a);var e=a.data,s={},o=e.filter((function(t){return s[t.action_name]=t,"signup"===t.action_name}))[0];o&&o.permission&&(t.signUpPublicAvailable=!0);var i=e.filter((function(t){return"resetpassword"===t.action_name}))[0];i&&i.permission&&(t.resetPublicAvailable=!0),t.actionMap=s,console.log("Action map",s)})).catch((function(t){console.log("Failed to load actions",t)})),t.loadAggregates({tableName:"user_account",column:"count"}).then((function(a){console.log("User account aggregates",a),t.userAggregate=a.data[0]})),t.loadAggregates({tableName:"cloud_store",column:"count"}).then((function(a){console.log("cloud store aggregates",a),t.cloudStoreAggregate=a.data[0]})),t.loadAggregates({tableName:"site",column:"count",group:"enable"}).then((function(a){console.log("Site aggregates",a),t.siteAggregate={active:0,total:0}})),t.loadAggregates({tableName:"action",column:"count"}).then((function(a){console.log("Site aggregates",a),t.actionAggregate=a.data[0]})),t.loadAggregates({tableName:"integration",column:"count"}).then((function(a){console.log("Site aggregates",a),t.integrationAggregate=a.data[0]})),t.loadServerConfig().then((function(a){for(var e in a)"true"===a[e]?a[e]=!0:"false"===a[e]&&(a[e]=!1);console.log("Server config",a),t.serverConfig=a})).catch((function(t){console.log("Failed to load server config",t)}))}},g=d,v=e("2877"),u=e("9989"),p=e("ead5"),m=e("0016"),f=e("079e"),q=e("eb85"),b=e("f09f"),C=e("a370"),h=e("66e5"),x=e("4074"),_=e("cb32"),w=e("27f9"),A=e("6a67"),y=e("9c40"),S=e("8f8e"),k=e("de5e"),P=e("9404"),H=e("4983"),O=e("eebe"),E=e.n(O),Q=Object(v["a"])(g,s,o,!1,null,null,null);a["default"]=Q.exports;E()(Q,"components",{QPage:u["a"],QBreadcrumbs:p["a"],QIcon:m["a"],QBreadcrumbsEl:f["a"],QSeparator:q["a"],QCard:b["a"],QCardSection:C["a"],QItem:h["a"],QItemSection:x["a"],QAvatar:_["a"],QInput:w["a"],QBtnToggle:A["a"],QBtn:y["a"],QCheckbox:S["a"],QPageSticky:k["a"],QDrawer:P["a"],QScrollArea:H["a"]})}}]);